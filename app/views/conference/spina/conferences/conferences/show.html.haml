- content_for :header do
  .d-md-flex.flex-items-start.my-4
    %div.flex-auto
      %h1.mb-1= @conference.name
      .text-gray
        %div
          = time_tag @conference.dates.min, l(@conference.dates.min, format: :long)
          to
          = time_tag @conference.dates.max, l(@conference.dates.max, format: :long)
        %address<
          = "#{@conference.institution.name}"
          = ", #{@conference.institution.city}" unless @conference.institution.name.include? @conference.institution.city
    = responsive_image_tag @conference.institution.logo.file, variant: { resize_to_limit: [300, 60] }, draggable: false, class: %w[flex-shrink-0 pl-md-4 pt-4 pt-md-0] if @conference.institution.logo

= render @conference.raw_part(:gallery), controls: true

- content_for :content do
  - if @conference.content(:submission_date)&.>= Date.today
    .alert.my-4
      %strong
        Submit abstracts by
        = time_tag @conference.content(:submission_date), l(@conference.content(:submission_date), format: :short)
      - if has_content? :submission_text
        = @conference.content(:submission_text).try :html_safe
      - if has_content? :submission_url
        = link_to 'Submit an abstract', @conference.content(:submission_url), class: [:button, :solid]

  %div{ data: { controller: 'underlinenav', 'underlinenav': { 'selected-item': '0' } } }
    %nav.UnderlineNav{ aria: { label: '' } }
      .UnderlineNav-body
        %button.btn-link.UnderlineNav-item.selected{ title: 'Information', target: '_self', role: 'tab', data: { target: 'underlinenav.item', action: 'underlinenav#select' } } Information
        %button.btn-link.UnderlineNav-item{ title: 'Presentations', target: '_self', role: 'tab', data: { target: 'underlinenav.item', action: 'underlinenav#select' } } Presentations
        %button.btn-link.UnderlineNav-item{ title: 'Events', target: '_self', role: 'tab', data: { target: 'underlinenav.item', action: 'underlinenav#select' } } Events
    .markdown-body.my-4{ data: { target: 'underlinenav.itemContent' } }= render @conference.raw_part(:text)
    %div{ data: { target: 'underlinenav.itemContent' } }
      = render 'shared/subnav', collection: @conference.presentation_types.order(:name), method: :name, cached: true do
        = link_to spina.conferences_conference_url(@conference, protocol: :webcal, format: :ics), class: %w[btn btn-primary float-sm-right mb-1 mb-sm-0], role: :button do
          = octicon 'calendar'
          Subscribe
    %div{ data: { target: 'underlinenav.itemContent' } }= render 'shared/subnav', collection: [@conference.raw_part(:socials), @conference.raw_part(:meetings)], method: :title, cached: true

  = render @conference.raw_part(:sponsors), cached: true
