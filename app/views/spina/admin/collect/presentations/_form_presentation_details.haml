#presentation_details.tab-content.active
  .well
    .horizontal-form
      .horizontal-form-group
        .horizontal-form-label
          = Spina::Collect::Presentation.human_attribute_name :conference
        .horizontal-form-content
          - if Spina::Collect::Conference.any?
            .select-dropdown
              = f.collection_select :conference, Spina::Collect::Conference.sorted, :id, :institution_and_year, required: true
          - else
            = t('spina.collect.conferences.no_conferences')

      .horizontal-form-group
        .horizontal-form-label
          = Spina::Collect::Presentation.human_attribute_name :presentation_type
        .horizontal-form-content
          - if @presentation.conference.blank?
            - if Spina::Collect::PresentationType.any?
              .select-dropdown
                = f.collection_select :presentation_type, Spina::Collect::Conference.sorted.first.presentation_types, :id, :name, required: true
            - else
              = t('spina.collect.presentation_types.no_presentation_types')
          - else
            .select-dropdown
              = f.collection_select :presentation_type, @presentation.conference.presentation_types, :id, :name, required: true

      .horizontal-form-group
        .horizontal-form-label
          = Spina::Collect::Presentation.human_attribute_name :room_use
        .horizontal-form-content
          - if @presentation.conference.blank?
            - if Spina::Collect::RoomUse.any?
              .select-dropdown
                = f.collection_select :room_use_id, Spina::Collect::Conference.sorted.first.presentation_types.first.room_uses, :id, :room_name, required: true
            - else
              = t('spina.collect.room_uses.no_room_uses')
          - else
            .select-dropdown
              = f.collection_select :room_use_id, @presentation.conference.presentation_types.first.room_uses, :id, :room_name, required: true

      .horizontal-form-group
        .horizontal-form-label
          = Spina::Collect::Presentation.human_attribute_name :title
        .horizontal-form-content
          = f.text_field :title, placeholder: Spina::Collect::Presentation.human_attribute_name(:title), required: true

      .horizontal-form-group
        .horizontal-form-label
          = Spina::Collect::Presentation.human_attribute_name :date
        .horizontal-form-content
          - if @presentation.conference.blank?
            - if Spina::Collect::Conference.any?
              .select-dropdown
                = f.select :date, Spina::Collect::Conference.sorted.first.dates.collect { |d| [l(d, format: :short), d.strftime("%Y-%m-%d")] }, required: true
            - else
              = f.date_field :date, value: (@presentation.date.strftime("%Y-%m-%d") unless @presentation.date.blank?), class: 'datepicker', placeholder: Spina::Collect::Presentation.human_attribute_name(:date), required: true
          - else
            .select-dropdown
              = f.select :date, @presentation.conference.dates.collect { |d| [l(d, format: :short), d.strftime("%Y-%m-%d")] }, required: true

      .horizontal-form-group
        .horizontal-form-label
          = Spina::Collect::Presentation.human_attribute_name :start_time
          %small= Spina::Collect::Presentation.human_attribute_name :start_time_description
        .horizontal-form-content
          = f.time_field :start_time, value: (@presentation.start_time.strftime("%H:%M") unless @presentation.start_time.blank?), placeholder: Spina::Collect::Presentation.human_attribute_name(:start_time), required: true

      .horizontal-form-group
        .horizontal-form-label
          = Spina::Collect::Presentation.human_attribute_name :abstract
        .horizontal-form-content
          = render 'spina/admin/shared/rich_text_field', f: f, field: :abstract

      .horizontal-form-group
        .horizontal-form-label
          = Spina::Collect::Presentation.human_attribute_name :presenters
          %small= (Spina::Collect::Presentation.human_attribute_name :presenters_description).try(:html_safe)
        .horizontal-form-content
          .multiple.select-dropdown
            = f.collection_select :presenter_ids, Spina::Collect::Delegate.order(:last_name, :first_name), :id, :reversed_name_and_institution, { }, multiple: true, required: true

  - unless @presentation.new_record?
    .pull-right= link_to t('spina.permanently_delete'), admin_collect_presentation_path(@presentation), method: :delete, data: { confirm: t('spina.collect.presentations.delete_confirmation', presentation: @presentation.title) }, class: 'button button-link button-danger'
